/* Minimal Prism-like highlighter (very small, for tutorial) */
(function(){
  if (typeof window === 'undefined') return;
  var Prism = window.Prism || {};
  Prism.util = {};
  Prism.languages = Prism.languages || {};
  // very small TSX/JSX tokenizer (not full-featured)
  Prism.languages.tsx = Prism.languages.jsx = {
    'comment': /\/\*[\s\S]*?\*\//g,
    'string': /(?:"|')(?:\\.|[^\\\n])*?(?:"|')/g,
    'keyword': /\b(?:const|let|var|function|return|import|from|export|default|interface|type|extends|class|new|if|else|switch|case|break|for|while|async|await)\b/g,
    'number': /\b\d+(?:\.\d+)?\b/g,
    'boolean': /\b(?:true|false)\b/g,
    'punctuation': /[{}[\];(),.:<>]/g,
    'function': /\b[A-Za-z_\$][A-Za-z0-9_\$]*(?=\s*\()/g
  };

  Prism.highlightAll = function(){
    var nodes = document.querySelectorAll('code[class*="language-"]');
    nodes.forEach(function(node){
      var cls = node.className || '';
      var lang = 'tsx';
      if (cls.indexOf('language-jsx')>=0) lang='jsx';
      if (cls.indexOf('language-bash')>=0) lang='bash';
      if (cls.indexOf('language-markup')>=0) lang='markup';
      var grammar = Prism.languages[lang] || Prism.languages['tsx'];
      var code = node.textContent || '';
      var html = code.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');
      // apply simple tokenization: comments, strings, keywords, numbers, booleans, punctuation, functions
      if (grammar.comment) html = html.replace(grammar.comment, function(m){ return '<span class="token comment">'+m+'</span>'; });
      if (grammar.string) html = html.replace(grammar.string, function(m){ return '<span class="token string">'+m+'</span>'; });
      if (grammar.keyword) html = html.replace(grammar.keyword, function(m){ return '<span class="token keyword">'+m+'</span>'; });
      if (grammar.number) html = html.replace(grammar.number, function(m){ return '<span class="token number">'+m+'</span>'; });
      if (grammar.boolean) html = html.replace(grammar.boolean, function(m){ return '<span class="token boolean">'+m+'</span>'; });
      if (grammar.function) html = html.replace(grammar.function, function(m){ return '<span class="token function">'+m+'</span>'; });
      if (grammar.punctuation) html = html.replace(grammar.punctuation, function(m){ return '<span class="token punctuation">'+m+'</span>'; });
      node.innerHTML = html;
    });
  };
  window.Prism = Prism;
})();

